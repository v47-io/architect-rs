<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Architect</title>
        <meta name="robots" content="noindex" />
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="index.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="installation/index.html"><strong aria-hidden="true">2.</strong> Installation</a></li><li class="chapter-item expanded "><a href="cli/index.html"><strong aria-hidden="true">3.</strong> CLI</a></li><li class="chapter-item expanded "><a href="templates/index.html"><strong aria-hidden="true">4.</strong> Templates</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="templates/fetching.html"><strong aria-hidden="true">4.1.</strong> Fetching</a></li><li class="chapter-item expanded "><a href="templates/structure.html"><strong aria-hidden="true">4.2.</strong> Structure</a></li><li class="chapter-item expanded "><a href="templates/configuration/index.html"><strong aria-hidden="true">4.3.</strong> Configuration</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="templates/configuration/context.html"><strong aria-hidden="true">4.3.1.</strong> Context</a></li><li class="chapter-item expanded "><a href="templates/configuration/questions.html"><strong aria-hidden="true">4.3.2.</strong> Questions</a></li><li class="chapter-item expanded "><a href="templates/configuration/filters.html"><strong aria-hidden="true">4.3.3.</strong> Filters</a></li></ol></li><li class="chapter-item expanded "><a href="templates/rendering/index.html"><strong aria-hidden="true">4.4.</strong> Rendering</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="templates/rendering/helpers.html"><strong aria-hidden="true">4.4.1.</strong> Helpers</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="expert-mode/index.html"><strong aria-hidden="true">5.</strong> Expert Mode</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="expert-mode/environment-variables.html"><strong aria-hidden="true">5.1.</strong> Environment Variables</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Architect</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="architect"><a class="header" href="#architect">Architect</a></h1>
<p><a href="https://github.com/v47-io/architect-rs/blob/master/LICENSE"><img src="https://img.shields.io/github/license/v47-io/architect-rs" alt="License" /></a>
<a href="https://github.com/v47-io/architect-rs/actions/workflows/tests.yml"><img src="https://github.com/v47-io/architect-rs/actions/workflows/tests.yml/badge.svg" alt=".github/workflows/rust.yml" /></a>
<a href="https://codecov.io/gh/v47-io/architect-rs"><img src="https://codecov.io/gh/v47-io/architect-rs/branch/master/graph/badge.svg?token=FDASC57M7H" alt="codecov" /></a>
<a href="https://github.com/v47-io/architect-rs/releases"><img src="https://img.shields.io/github/v/release/v47-io/architect-rs?include_prereleases" alt="Latest Release" /></a></p>
<p>Architect is a straightforward and technology-agnostic project scaffolding tool.</p>
<p>This means you can prepare templates for projects using any technology and Architect will spit out a perfect new
project.</p>
<p>For its templating Architect uses the Handlebars templating language. Please check the documentation for more
information.</p>
<h2 id="a-hrefhttpsv47-iogithubioarchitect-rs--documentation-a"><a class="header" href="#a-hrefhttpsv47-iogithubioarchitect-rs--documentation-a"><a href="https://v47-io.github.io/architect-rs/">&gt;&gt; 📚 Documentation &lt;&lt;</a></a></h2>
<h2 id="tldr"><a class="header" href="#tldr">TL;DR</a></h2>
<p>Architect uses Handlebars and Git to create proper projects from template repositories.</p>
<ol>
<li>Add any file to your template repository and add Handlebars expressions to it. (<a href="https://v47-io.github.io/architect-rs/templates/rendering/">docs</a>)</li>
<li>Add an <code>.architect.json</code> configuration file with your questions (<a href="https://v47-io.github.io/architect-rs/templates/configuration/">docs</a>)</li>
<li>Download the <code>architect</code> executable for your platform from the
latest <a href="https://github.com/v47-io/architect-rs/releases">Release</a>.</li>
<li>Execute <code>architect &lt;PATH-TO-REPO&gt;</code> in your desired local directory, answer user-defined questions, et voila, you got
a fully functional project created from a template. (<a href="https://v47-io.github.io/architect-rs/cli/index.html">docs</a>)</li>
</ol>
<h3 id="sample-architectjson"><a class="header" href="#sample-architectjson">Sample <code>.architect.json</code></a></h3>
<pre><code class="language-json">{
  &quot;name&quot;: &quot;My Awesome Microservice Template&quot;,
  &quot;version&quot;: &quot;1.0&quot;,
  &quot;questions&quot;: [
    {
      &quot;name&quot;: &quot;author.name&quot;,
      &quot;type&quot;: &quot;Text&quot;,
      &quot;pretty&quot;: &quot;What's your name?&quot;
    },
    {
      &quot;name&quot;: &quot;author.email&quot;,
      &quot;type&quot;: &quot;Text&quot;,
      &quot;pretty&quot;: &quot;What's your email address?&quot;
    },
    {
      &quot;name&quot;: &quot;project.package&quot;,
      &quot;type&quot;: &quot;Identifier&quot;,
      &quot;pretty&quot;: &quot;What should be the root package for your Kotlin sources?&quot;,
      &quot;default&quot;: &quot;com.github.example&quot;
    },
    {
      &quot;name&quot;: &quot;project.features&quot;,
      &quot;type&quot;: &quot;Selection&quot;,
      &quot;pretty&quot;: &quot;Which features would you like to use?&quot;,
      &quot;items&quot;: [
        &quot;jdbc&quot;,
        &quot;kafka&quot;,
        &quot;redis&quot;,
        &quot;mySpecialLibrary&quot;
      ],
      &quot;default&quot;: [
        &quot;jdbc&quot;,
        &quot;mySpecialLibrary&quot;
      ],
      &quot;multi&quot;: true
    },
    {
      &quot;name&quot;: &quot;project.tests&quot;,
      &quot;type&quot;: &quot;Option&quot;,
      &quot;pretty&quot;: &quot;Do you want to generate test stubs?&quot;
    },
    {
      &quot;name&quot;: &quot;current.time&quot;,
      &quot;type&quot;: &quot;Custom&quot;,
      &quot;format&quot;: &quot;^\\d\\d:\\d\\d$&quot;,
      &quot;pretty&quot;: &quot;What's the current time?&quot;
    }
  ],
  &quot;filters&quot;: {
    &quot;conditionalFiles&quot;: [
      {
        &quot;condition&quot;: &quot;project.features.mySpecialLibrary&quot;,
        &quot;matcher&quot;: &quot;libs/mySpecialLibrary-*.jar&quot;
      }
    ],
    &quot;includeHidden&quot;: [
      &quot;.github/**&quot;,
      &quot;.gitignore&quot;
    ],
    &quot;nonTemplates&quot;: [
      &quot;**/*.{gradle.kts,jar}&quot;
    ]
  }
}
</code></pre>
<h2 id="license-and-contributions"><a class="header" href="#license-and-contributions">License and Contributions</a></h2>
<p>Architect is provided under the terms of the BSD 3-Clause License.</p>
<p>Contributions are welcome, but you must have all rights to the contributed material and agree to provide it under the
terms of the aforementioned BSD 3-Clause License.</p>
<p>A good idea would be to check out the <a href="https://github.com/v47-io/architect-rs/projects/1">Architect 1.0</a> project, it
tracks all the work needed to get Architect to 1.0.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="installation"><a class="header" href="#installation">Installation</a></h1>
<h2 id="prerequisites"><a class="header" href="#prerequisites">Prerequisites</a></h2>
<p>Architect uses your existing Git installation, so you should have the <code>git</code> command on your <code>PATH</code>.</p>
<h2 id="using-pre-built-binaries"><a class="header" href="#using-pre-built-binaries">Using pre-built binaries</a></h2>
<p>You can easily get pre-built binaries for Architect if you don't want to build it yourself.</p>
<p>Simply navigate to the <a href="https://github.com/v47-io/architect-rs/releases">Releases</a> page on GitHub and download 
the latest binary for your platform. </p>
<p>Currently, the supported platforms are:</p>
<ul>
<li>Linux (x86_64, libc)</li>
<li>Windows (x86_64)</li>
<li>macOS (darwin)</li>
</ul>
<p>After downloading the executable file simply place it or a link to it in your <code>PATH</code> and you're ready to go.</p>
<p>Don't forget to mark the file as executable if you're on Linux or macOS:</p>
<pre><code class="language-shell">chmod +x architect
</code></pre>
<h2 id="building-from-source"><a class="header" href="#building-from-source">Building from source</a></h2>
<p>If you're in the mood for some action, or you want to try the latest features before they appear in a release
you can get the source from GitHub and build Architect yourself.</p>
<p>Fork it or get the source from the <a href="https://github.com/v47-io/architect-rs">repository</a>, and you're ready to go.</p>
<p>Make sure you've got at least Rust 2018 installed and the <code>cargo</code> command is available.</p>
<h3 id="building"><a class="header" href="#building">Building</a></h3>
<pre><code class="language-shell">cargo build --bin architect
</code></pre>
<p>This command should create an executable file in the <code>target/debug</code> directory, ready for use.</p>
<p>To create an optimized build add the <code>--release</code> flag to the command:</p>
<pre><code class="language-shell">cargo build --release --bin architect
</code></pre>
<p>The executable file should then be located in the <code>target/release</code> directory.</p>
<h3 id="testing"><a class="header" href="#testing">Testing</a></h3>
<pre><code class="language-shell">cargo test --bin architect
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="cli"><a class="header" href="#cli">CLI</a></h1>
<p>Architect provides a simple command-line interface that uses sensible default values to get going
as quickly as possible.</p>
<p>To instantiate a template in a child directory of the working directory execute this command:</p>
<pre><code class="language-shell">architect &lt;PATH-OR-URL&gt;
</code></pre>
<p>Architect follows the Git way of determining the output directory. If you don't explicitly specify 
an output directory, it will use the name of the source Git repository or the directory name of the
path as the target directory name.</p>
<p><strong>Example</strong>:</p>
<ul>
<li>Git repository: <code>https://github.com/v47-io/architect-test-template.git</code></li>
<li>Output directory: <code>./architect-test-template</code></li>
</ul>
<p>Additionally, you can also specify a target directory yourself, e.g. if you don't want to use the name
of the source repository:</p>
<pre><code class="language-shell">architect &lt;PATH-OR-URL&gt; some-directory
</code></pre>
<p>Architect behaves the same as Git in this instance, it will create a directory with this name, relative
to the working directory. Of course, you can also specify an absolute path.</p>
<p>By default, Architect will copy the entire Git history of the source repository to the target, or 
initialize the target as a Git repository. To prevent you from accidentally overwriting the template
Architect removes the original Git remotes from the target.</p>
<h2 id="options"><a class="header" href="#options">Options</a></h2>
<p>Architect offers some options to customize the behavior of Architect.</p>
<h3 id="--b---branch-branch"><a class="header" href="#--b---branch-branch">--b, --branch &lt;branch&gt;</a></h3>
<p>Specify a different remote branch to fetch instead of the default branch of the repository.</p>
<h2 id="flags"><a class="header" href="#flags">Flags</a></h2>
<p>To customize the behavior of Architect even further you can specify one or more flags as described here.</p>
<h3 id="--local-git"><a class="header" href="#--local-git">--local-git</a></h3>
<p>Use your local Git installation instead of embedded Git.</p>
<p>This is intended as an escape hatch if you are using authentication scenarios not supported by the
embedded Git functionality in Architect.</p>
<p>Architect is able to use most SSH agent scenarios and username/password authentication, so this 
should not be needed often.</p>
<h3 id="--dirty"><a class="header" href="#--dirty">--dirty</a></h3>
<p>Use the template source in its current (dirty) state.</p>
<p>This only has an effect if a local path is specified as the source repository. In that case Architect
won't perform a Git clone but will just copy the directory, regardless of the local state.</p>
<p>This is most useful to test a template locally while you are developing it. </p>
<p>This option has no effect with remote repositories.</p>
<h3 id="--ignore-checks"><a class="header" href="#--ignore-checks">--ignore-checks</a></h3>
<p>Ignore some failed checks that would prevent Architect from creating the target files.</p>
<p>These errors will be ignored:</p>
<ul>
<li>Condition evaluation errors (for conditional files)</li>
</ul>
<h3 id="--no-history"><a class="header" href="#--no-history">--no-history</a></h3>
<p>Don't copy the Git history from the source repository to the target.</p>
<p>Instead, the target will be initialized as a new Git repository.</p>
<h3 id="--no-init"><a class="header" href="#--no-init">--no-init</a></h3>
<p>Don't initialize the target directory as a Git repository.</p>
<p>This requires the <code>--no-history</code> flag to be present as well.</p>
<h3 id="--verbose"><a class="header" href="#--verbose">--verbose</a></h3>
<p>Enables verbose output.</p>
<p>This is very technical at places. Make sure to specify this option before reporting a bug.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="templates"><a class="header" href="#templates">Templates</a></h1>
<p>Architect makes it easy to scaffold entire projects from Git repositories, here referred to as templates.</p>
<p>All Git repositories are potential templates, and all files in them are also treated as Handlebars templates if they
contain Handlebars template expressions indicated by <code>{{</code> and <code>}}</code>. All other files are simply copied as long as they
are not excluded.</p>
<p>On top of that all file names are also potential Handlebars templates that are rendered when generating sources from a
template.</p>
<p>Architect preserves the original directory structure but allows the creation of new nested directory structures by way
of Handlebars expressions in directory names.</p>
<h2 id="template-repositories"><a class="header" href="#template-repositories">Template Repositories</a></h2>
<p>Instead of just using the entire Git repository as a template, Architect provides the option to maintain multiple
templates in one repository and referring to them by their directory name when generating a project.</p>
<p>When using template repositories, each template must contain an <code>.architect.json</code> file to be usable as a template.</p>
<p>Looking at the following example you can then specify the option <code>--template template-1</code> to use the specified template
instead of the repository.</p>
<p>Example for a directory structure with multiple templates:</p>
<pre><code class="language-text">repository-dir
├── template-1
|  └── .architect.json
├── template-2
|  └── .architect.json
└── README.md
</code></pre>
<p>You can still use the entire repository as a template (by not specifying a template name), but all subdirectories
containing an <code>.architect.json</code> file will be ignored.</p>
<p>Although nesting templates is not possible, you can still group multiple templates in directories.</p>
<p>To use one of the grouped templates of the following example you would specify the
option <code>--template template-group-1/template-1</code>.</p>
<pre><code class="language-text">repository-dir
├── template-group-1
|  ├── template-1
|  |  └── .architect.json
|  └── template-2
|     └── .architect.json
├── template-3
|  └── .architect.json
└── README.md
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="fetching"><a class="header" href="#fetching">Fetching</a></h1>
<p>Architect uses Git to fetch remote repositories.</p>
<p>Fetching a remote repository is pretty straightforward, but Architect also supports fetching 
templates from a local directory.</p>
<p>Architect will either fetch it using Git, using the directory like a remote repository, or copy the 
directories contents, e.g. if the directory doesn't contain a Git repository.</p>
<p>When fetching from a local directory you can force Architect to copy the contents instead of using
Git using the <code>--dirty</code> <a href="templates/../cli/README.html">CLI</a> flag. This is particularly useful when you want to 
test a template you are creating without having to commit your changes or pushing it to a remote 
Git repository.</p>
<h2 id="embedded-git-and-fallback"><a class="header" href="#embedded-git-and-fallback">Embedded Git and Fallback</a></h2>
<p>Architect embeds some Git functionality to have portable way of fetching templates without depending 
on a local Git installation.</p>
<p>However, some authentication scenarios or other features provided by a proper Git installation are
going to be absent, therefore breaking the functionality of Architect.</p>
<p>To circumvent this Architect offers the CLI flag <code>--local-git</code> which tells Architect to use the local
Git installation instead of the embedded Git functions.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="structure"><a class="header" href="#structure">Structure</a></h1>
<p>Architect treats the entire directory and all included files in a Git repository as templates.</p>
<p>This means that the original directory structure is preserved, and you can create additional nested
directory structures when using Handlebars expressions.</p>
<p>Because all directory and file names are treated as potential Handlebars templates themselves, you
can create nested directory structures, e.g. for Java packages.</p>
<p><strong>Example</strong>:</p>
<p>Provided you have a directory in your template <code>src/main/java/{{ package javaPackage }}</code> there are few 
things to consider.</p>
<p>Let's consider <code>javaPackage</code> contains the value <code>com.github.example</code>. The <code>package</code> helper (described 
<a href="templates/rendering/helpers.html">here</a>) will transform that value to <code>com/github/example</code>. The resulting value 
will then be inserted into the path which will give us the final path <code>src/main/java/com/github/example</code>.</p>
<p>Architect will then create that path's nested directories copy all files from the source directory into 
this new, dynamically created directory.</p>
<h2 id="a-hreftemplatesconfigurationarchitectjsona"><a class="header" href="#a-hreftemplatesconfigurationarchitectjsona"><a href="templates/configuration/">.architect.json</a></a></h2>
<p>The template directory can also contain a <code>.architect.json</code> file which can specify various configuration
values influencing template rendering.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="configuration"><a class="header" href="#configuration">Configuration</a></h1>
<p>You can configure a template by providing a <code>.architect.json</code> file.</p>
<p>The format of its content is described here using TypeScript, the root object is modelled as the <code>Config</code> interface.</p>
<!--@formatter:off-->
<pre><code class="language-ts">/**
 * The configuration used by Architect when creating an instance of this project template.
 *
 * Everything (including the file itself) is optional, but Architect makes more sense to
 * use when actually configured
 */
export interface Config {
    /**
     * The name of the template.
     *
     * Can be used in handlebars templates using `__template__.name`
     */
    name?: string;
    /**
     * The version of the template.
     *
     * Can be used in handlebars templates using `__template__.version`
     */
    version?: string;
    /**
     * Questions to ask the user to specify dynamic context values.
     *
     * These values are then available in handlebars templates
     */
    questions?: Question[];
    /**
     * Contains multiple filters to control which files are actually considered and rendered
     */
    filters?: Filters;
}

export type Question = SimpleQuestion | SelectionQuestion | CustomQuestion;

export interface SimpleQuestion extends BaseQuestion {
    type: QuestionType.Identifier | QuestionType.Option | QuestionType.Text;
}

export interface SelectionQuestion extends BaseQuestion {
    type: QuestionType.Selection;

    /**
     * The items available for selection.
     *
     * These will be set to `true` in the context if selected.
     *
     * Format: `^[a-zA-Z_$][a-zA-Z0-9_$]*$`
     */
    items: string[];
    /**
     * Specifies whether multiple items can be selected
     */
    multi?: boolean;
}

export interface CustomQuestion extends BaseQuestion {
    type: QuestionType.Custom;

    /**
     * The regular expression that is used to validate the input for this question.
     *
     * When specifying a default value it must match this regular expression
     */
    format: string;
}

/**
 * This interface specifies the configuration properties that decide which files are considered
 * for Handlebars rendering or even included in the target directory
 */
export interface Filters {
    /**
     * Specifies conditions for certain files to be created.
     *
     * These conditions have full access to the context that is created by the questions.
     *
     * Note that conditions specified here don't apply to hidden files that weren't explicitly
     * included using `includeHidden` or files excluded using `exclude`
     */
    conditionalFiles?: ConditionalFiles[];
    /**
     * Specifies Glob expressions to include hidden files in the target.
     *
     * Note that including the `.git` directory here will have no effect
     */
    includeHidden?: string[];
    /**
     * Specifies Glob expressions to exclude files in the target.
     *
     * Note that exclusions have a higher precedence than inclusions and conditional files
     */
    exclude?: string[];
    /**
     * Specifies Glob expressions that indicate the files that should be rendered using Handlebars.
     *
     * This disables Handlebars rendering for all other files. Directory or file names are not affected
     */
    templates?: string[];
    /**
     * Specifies Glob expressions that indicate files that should not be rendered using Handlebars.
     *
     * This property has no effect, if `templates` is also specified
     */
    nonTemplates?: string[];
}

export interface ConditionalFiles {
    /**
     * The condition that decides whether the matched files are created.
     *
     * This is an expression that is handled by handlebars.
     *
     * The expression is automatically wrapped in curly braces (`{{` `}}`) so you
     * only need to specify the actual content of the expression here
     */
    condition: string;
    /**
     * A Glob string specifying the files affected by the condition
     */
    matcher: string;
}

interface BaseQuestion {
    /**
     * The name in the context for the value specified when answering this question.
     *
     * Can be multiple names concatenated using `.` to create hierarchical structures in
     * the context.
     *
     * Format: `^[a-zA-Z_$][a-zA-Z0-9_$]*$`
     */
    name: string;
    /**
     * The type of the question, which indicates the expected values
     */
    type: QuestionType;
    /**
     * A properly spelled out question to ask instead of just presenting the name when
     * processing input
     */
    pretty?: string;
    /**
     * The default answer for this question.
     *
     * If the question is of type `Option`, this should specify a boolean, if it's 'Selection'
     * you can specify either a string or a list of strings, otherwise just a string.
     *
     * Note: Specifying a list of strings will only be accepted if the `Selection` question
     * allows the selection of multiple items
     */
    default?: string | boolean | string[]
}

export enum QuestionType {
    Identifier = 'Identifier',
    Option = 'Option',
    Selection = 'Selection',
    Text = 'Text',
    Custom = 'Custom'
}
</code></pre>
<!--@formatter:on-->
<div style="break-before: page; page-break-before: always;"></div><h1 id="context"><a class="header" href="#context">Context</a></h1>
<p>Architect builds a Handlebars context using some provided information and the values defined 
when answering configured questions.</p>
<p>This context is available to all instances where Handlebars templates are processed, so you 
can access specified values in conditions, or file/directory names.</p>
<p>Context consists of multiple nested objects and properties which contain values.</p>
<h2 id="default-context"><a class="header" href="#default-context">Default Context</a></h2>
<p>By default, Architect provides the following data in the context, provided values are configured:</p>
<pre><code class="language-json">{
  &quot;__template__&quot;: {
    &quot;name&quot;: &quot;The template name from in .architect.json or undefined&quot;,
    &quot;version&quot;: &quot;The template version from .architect.json or undefined&quot;
  }
}
</code></pre>
<p>You cannot add to the <code>__template__</code> object using your questions, and Architect will reject any
attempt to do so. However, you can still define a <code>__template__</code> object in any nested object 
further down the line.</p>
<p>Something like this would be possible:</p>
<pre><code class="language-json">{
  &quot;__template__&quot;: ...,
  &quot;yourOwnObject&quot;: {
    &quot;__template__&quot;: {
      &quot;yourProperty&quot;: &quot;some data&quot;
    }
  }
}
</code></pre>
<h2 id="file-context"><a class="header" href="#file-context">File Context</a></h2>
<p>In addition to the default context Architect adds some information about the current template file 
to the context:</p>
<pre><code class="language-json">{
  &quot;__template__&quot;: {
    ...,
    &quot;file&quot;: {
      &quot;rootDir&quot;: &quot;the working directory, not the target directory&quot;,
      &quot;sourceName&quot;: &quot;the original file name of the template file&quot;,
      &quot;sourcePath&quot;: &quot;the original path of the template file&quot;,
      &quot;targetName&quot;: &quot;the final file name of the rendered template file&quot;,
      &quot;targetPath&quot;: &quot;the final path of the rendered template file&quot;
    }
  }
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="questions"><a class="header" href="#questions">Questions</a></h1>
<p>In the template configuration you can define questions that Architect should ask before the files can be written to the
target. The answers to those questions are stored in the context and are therefore available in the context.</p>
<p>You can ask various types of questions, each with a concrete use-case.</p>
<p>The question names must be (possibly dot-delimited) identifiers, so that they can be used in Handlebars templates. By
specifying multiple dot-delimited identifiers you can create nested objects in the context.</p>
<p>Multiple occurrences of previously specified question names will overwrite prior ones without warning.</p>
<p><strong>Example</strong>:</p>
<p>You define questions with the following names:</p>
<ul>
<li><code>author.name</code></li>
<li><code>author.email</code></li>
<li><code>somethingElse</code></li>
</ul>
<p>Result in the context:</p>
<pre><code class="language-json">{
  ...,
  &quot;author&quot;: {
    &quot;name&quot;: ...,
    &quot;email&quot;: ...
  },
  &quot;somethingElse&quot;: ...
}
</code></pre>
<h3 id="default-values"><a class="header" href="#default-values">Default Values</a></h3>
<p>You can also specify default values for all your questions. Specifying a default value makes the question optional and
you can proceed without entering a custom value.</p>
<h2 id="identifier"><a class="header" href="#identifier">Identifier</a></h2>
<p>Ask for an identifier, i.e. a String that can only consist of a limited subset of characters, or multiple such strings
concatenated by dot (<code>.</code>) characters.</p>
<p><strong>Format</strong>:</p>
<pre><code class="language-regexp">^[a-zA-Z_$][a-zA-Z0-9_$]*$
</code></pre>
<p>A possible use-case for this question type can be to ask for a class name for an application's main class or a package
name for Java.</p>
<h3 id="default-values-1"><a class="header" href="#default-values-1">Default Values</a></h3>
<p>You can specify any value as a default value that would fit the specified format.</p>
<h2 id="option"><a class="header" href="#option">Option</a></h2>
<p>A simple yes or no question. This will store a Boolean in the context.</p>
<p><strong>Example</strong>:</p>
<p>You specify <code>yes</code> for the question <code>insertLogStatements</code>.</p>
<p>Result in the context:</p>
<pre><code class="language-json">{
  ...,
  &quot;insertLogStatements&quot;: true
}
</code></pre>
<p>This question type is useful when you want to present the user with a binary choice, e.g. whether to generate
a <code>.gitignore</code> in the target directory.</p>
<h3 id="default-values-2"><a class="header" href="#default-values-2">Default Values</a></h3>
<p>You can specify a boolean value as the default value (<code>true</code> or <code>false</code>)</p>
<h2 id="selection"><a class="header" href="#selection">Selection</a></h2>
<p>Useful where you want to offer a predefined list of values to choose from. The selected value(s)
will be created as properties in the context and have the value <code>true</code>.</p>
<p>You can configure a selection question to accept only one or multiple (<code>multi</code>) values to be selected.</p>
<p>As those values will be added as properties they must match a certain format:</p>
<pre><code class="language-regexp">^[a-zA-Z_$][a-zA-Z0-9_$]*$
</code></pre>
<p><strong>Example</strong>:</p>
<p>The question (<code>whichOnes</code>) defines three values: <code>value1</code>, <code>value2</code>, and <code>value3</code>. You select
<code>value1</code> and <code>value2</code>.</p>
<p>Result in the context:</p>
<pre><code class="language-json">{
  ...,
  &quot;whichOnes&quot;: {
    &quot;value1&quot;: true,
    &quot;value2&quot;: true
  }
}
</code></pre>
<p>A possible use-case for this type of question is to define several features a user could choose to enable when using a
template, e.g. whether to use logging statements, or to include a certain dependency.</p>
<h3 id="default-values-3"><a class="header" href="#default-values-3">Default Values</a></h3>
<p>Depending on whether multi-selection is enabled you can either specify a single string as the default value or an array
of strings.</p>
<h2 id="text"><a class="header" href="#text">Text</a></h2>
<p>This question type allows you to ask for arbitrary text to store in the context. No format is enforced for answers.</p>
<p>Possible use-cases for this question type can be to ask for a person's full name or an email address.</p>
<h3 id="default-values-4"><a class="header" href="#default-values-4">Default Values</a></h3>
<p>You can set any string as the default value.</p>
<h2 id="custom"><a class="header" href="#custom">Custom</a></h2>
<p>You can define a custom regular expression to validate the input. Please keep in mind that the regular expression will
look for the shortest matching string, so you must specify anchors (<code>^</code>, <code>$</code>) if you want to match the entire input.</p>
<p>Architect uses <a href="https://docs.rs/regex/1.5.4/regex/">this</a> implementation.</p>
<h3 id="default-values-5"><a class="header" href="#default-values-5">Default Values</a></h3>
<p>You can set any string that matches the Regular expression as the default value.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="filters"><a class="header" href="#filters">Filters</a></h1>
<p>The Architect configuration file allows you to define filters in multiple ways to control whether certain files get
actually added to the target.</p>
<p>The filters are:</p>
<ul>
<li><code>exclude</code> (Exclusion of files, strongest)</li>
<li><code>includeHidden</code> (Inclusion of certain hidden files)</li>
<li><code>conditionalFiles</code> (Inclusion of files if a certain condition is true)</li>
<li><code>templates</code> (Which files to treat as templates and render, overrides <code>nonTemplates</code>)</li>
<li><code>nonTemplates</code> (Which files not to render as templates)</li>
</ul>
<p>These filters have a precedence assigned to them, exclusions are the strongest. Files that match an exclusion rule are
never added to the target. Hidden files can only be added through a condition if they have also been matched by an
explicit <code>includeHidden</code> expression. If you include a hidden file, but a condition that matches it is false, it's not
added to the target.</p>
<p>Keep in mind that the top-level <code>.git</code> directory cannot be matched by any of those filters and is always excluded from
explicit processing. Architect handles that <code>.git</code> directory separately.</p>
<p>All filters use <em>glob</em> expressions that match the entire relative path to the root directory of the template.</p>
<p>Please see <a href="https://docs.rs/globset/0.4.8/globset/#syntax">this</a> for more information on the supported syntax for <em>glob</em>
expressions (Architect enables the <code>literal_separator</code> option and case-insensitive matching).</p>
<h2 id="exclusions"><a class="header" href="#exclusions">Exclusions</a></h2>
<p>Define <em>glob</em> expressions to match files you don't want to have in the target.</p>
<h2 id="include-hidden"><a class="header" href="#include-hidden">Include Hidden</a></h2>
<p>Architect by default excludes all hidden files or directories. This only applies to files or directories starting with a
dot (<code>.</code>) character, files marked as hidden in Windows will still be included.</p>
<p>Define <em>glob</em> expressions to match hidden files you want to include anyway.</p>
<p>Please keep in mind that you cannot include the top-level <code>.git</code> directory or any of its descendants using this.</p>
<h2 id="conditional-files"><a class="header" href="#conditional-files">Conditional Files</a></h2>
<p>Architect will only include matched files if the specified condition returns a &quot;truthy&quot; result. Here, ordering matters,
as Architect will only evaluate the condition for the first match.</p>
<p>Here you define <em>glob</em> expressions to match files, and Handlebars expressions to determine whether these files should be
included. These Handlebars expression don't need to be delimited by <code>{{</code> and <code>}}</code>, and have full access to the context.</p>
<p>The <em>glob</em> expression will be applied to the file in the source repository, so before any possible Handlebars templates
in file or directory names are evaluated.</p>
<p>Please keep in mind that when working with hidden files conditions can only be applied to files included using
<code>includeHidden</code>.</p>
<p>Format in the configuration file:</p>
<!--@formatter:off-->
<pre><code class="language-ts">// Config
    /**
     * Contains multiple filters to control which files are actually considered and rendered
     */
    filters?: Filters;

// Filters
    /**
     * Specifies conditions for certain files to be created.
     *
     * These conditions have full access to the context that is created by the questions.
     *
     * Note that conditions specified here don't apply to hidden files that weren't explicitly
     * included using `includeHidden` or files excluded using `exclude`
     */
    conditionalFiles?: ConditionalFiles[];

// ConditionalFiles
    /**
     * The condition that decides whether the matched files are created.
     *
     * This is an expression that is handled by handlebars.
     *
     * The expression is automatically wrapped in curly braces (`{{` `}}`) so you
     * only need to specify the actual content of the expression here
     */
    condition: string;
    /**
     * A Glob string specifying the files affected by the condition
     */
    matcher: string;
</code></pre>
<!--@formatter:on-->
<h2 id="templates-1"><a class="header" href="#templates-1">Templates</a></h2>
<p>Define <em>glob</em> expressions to match files you want to have rendered as templates, this can be seen as an allow-list or
whitelist that defines rendered files.</p>
<p>This leads to all other files not being rendered as Handlebars templates, instead they are copied as-is.</p>
<p><code>templates</code> overrides <code>nonTemplates</code>, so even if you specify the latter it won't have any effect.</p>
<h2 id="non-templates"><a class="header" href="#non-templates">Non-Templates</a></h2>
<p>Define <em>glob</em> expressions to match files you don't want to have rendered as templates, this can be seen as a deny-list
or blacklist that defines non-rendered files.</p>
<p>Files that are matched by this are copied as-is instead of being rendered using Handlebars.</p>
<p>This property is ignored if <code>templates</code> is configured.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rendering"><a class="header" href="#rendering">Rendering</a></h1>
<p>Architect renders files and names using Handlebars and treats all files as potential Handlebars templates.</p>
<p>To find out whether a file actually is a template Architect looks at its contents to look for the &quot;mustaches&quot;
(<code>{{</code> and <code>}}</code>). Should Architect find both in that order on the same line it will treat the file as a template.</p>
<p>File and directory names are also potential templates that are rendered using Handlebars if they contain the mustaches.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="helpers"><a class="header" href="#helpers">Helpers</a></h1>
<p>Architect provides a suite of Handlebars helpers to make writing your templates a breeze.</p>
<p>By default, Architect provides all helpers supported by the <a href="https://crates.io/crates/handlebars">handlebars</a>
and the <a href="https://crates.io/crates/handlebars_misc_helpers">handlebars_misc_helpers</a> libraries.</p>
<p>Rhai scripting in templates (as provided by the handlebars library) is not supported!</p>
<p>Please take a look at the <a href="https://handlebarsjs.com/guide/">handlebarsjs Language Guide</a> for guidance on how to actually
use helpers.</p>
<h2 id="package"><a class="header" href="#package">package</a></h2>
<p>In addition to all those helpers Architect provides a helper off its own: <code>package</code>. This helper is intended to help you
write better templated directory names.</p>
<p>You can use this helper to create nested directory structures for your files, its use is to create multiple, nested
directories from dot-separated values, e.g. a Java package.</p>
<p>This helper is not available in template files, only file or directory names.</p>
<p><strong>Example</strong>:</p>
<ul>
<li>File path: <code>src/main/java/{{ package javaPackage }}/Main.java</code></li>
<li>Context: <code>&quot;javaPackage&quot;: &quot;com.github.example&quot;</code></li>
<li>Result: <code>src/main/java/com/github/example/Main.java</code></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="expert-mode"><a class="header" href="#expert-mode">Expert Mode</a></h1>
<p>This section contains information about topics that are not important for the everyday user, but you might find them
interesting if you're looking into tweaking the internals of Architect or want to know more about how it does its thing.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="environment-variables"><a class="header" href="#environment-variables">Environment Variables</a></h1>
<p>Architect offers you the ability to modify some behaviors through the use of environment variables.</p>
<h2 id="render_parallelism"><a class="header" href="#render_parallelism">RENDER_PARALLELISM</a></h2>
<p>By default, Architect uses multiple threads to render the templates.</p>
<p>This is the formula: <code>max(1, min(4, number_of_threads / 2))</code></p>
<p><code>number_of_threads</code> is the number of threads available on your machine.</p>
<p>If you think four threads are too little or too much, you can change this to any other integer &gt; 0.</p>
<h2 id="template_inspect_max_lines"><a class="header" href="#template_inspect_max_lines">TEMPLATE_INSPECT_MAX_LINES</a></h2>
<p>Architect won't read entire files to find out if they are templates. By default, it'll only read 25 lines of each file
to find out.</p>
<p>If you have files where the Handlebars &quot;mustaches&quot; only start occurring after the 25th line, this environment variable
is for you. Just set it to any other integer &gt; 0.</p>
<h2 id="line_buffer_capacity"><a class="header" href="#line_buffer_capacity">LINE_BUFFER_CAPACITY</a></h2>
<p>Architect uses a buffer to read lines into memory one at a time. By default, this buffer is 256 bytes long.</p>
<p>Because the buffer expands automatically this isn't even something I'd recommend adjusting, but if you really want to,
set it to any other integer &gt; 0.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
    </body>
</html>
